const t=(t,e,n)=>Math.min(Math.max(n,t),e),e={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},n=t=>"number"==typeof t,i=t=>Array.isArray(t)&&!n(t[0]),s=(t,e,n)=>-n*t+n*e+t,r=()=>{},a=t=>t,o=(t,e,n)=>e-t==0?1:(n-t)/(e-t);function c(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=o(0,e,i);t.push(s(n,1,r))}}const u=t=>Array.isArray(t)&&n(t[0]),l=t=>"object"==typeof t&&Boolean(t.createAnimation),h=t=>"function"==typeof t,f=t=>"string"==typeof t,d=t=>1e3*t,p=t=>t/1e3,y=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function v(t,e,n,i){if(t===e&&n===i)return a;return s=>0===s||1===s?s:y(function(t,e,n,i,s){let r,a,o=0;do{a=e+(n-e)/2,r=y(a,i,s)-t,r>0?n=a:e=a}while(Math.abs(r)>1e-7&&++o<12);return a}(s,0,1,t,n),e,i)}const m={ease:v(.25,.1,.25,1),"ease-in":v(.42,0,1,1),"ease-in-out":v(.42,0,.58,1),"ease-out":v(0,0,.58,1)},g=/\((.*?)\)/;function M(e){if(h(e))return e;if(u(e))return v(...e);if(m[e])return m[e];if(e.startsWith("steps")){const n=g.exec(e);if(n){const e=n[1].split(",");return((e,n="end")=>i=>{const s=(i="end"===n?Math.min(i,.999):Math.max(i,.001))*e,r="end"===n?Math.floor(s):Math.ceil(s);return t(0,1,r/e)})(parseFloat(e[0]),e[1].trim())}}return a}class w{constructor(n,r=[0,1],{easing:u,duration:h=e.duration,delay:f=e.delay,endDelay:d=e.endDelay,repeat:p=e.repeat,offset:y,direction:v="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=a,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),l(u=u||e.easing)){const t=u.createAnimation(r);u=t.easing,r=t.keyframes||r,h=t.duration||h}this.repeat=p,this.easing=i(u)?a:M(u),this.updateDuration(h);const m=function(e,n=function(t){const e=[0];return c(e,t-1),e}(e.length),r=a){const u=e.length,l=u-n.length;return l>0&&c(n,l),a=>{let c=0;for(;c<u-2&&!(a<n[c+1]);c++);let l=t(0,1,o(n[c],n[c+1],a));return l=function(t,e){return i(t)?t[((t,e,n)=>{const i=e-0;return((n-0)%i+i)%i+0})(0,t.length,e)]:t}(r,c)(l),s(e[c],e[c+1],l)}}(r,y,i(u)?u.map(M):a);this.tick=t=>{var e;f=f;let i=0;i=void 0!==this.pauseTime?this.pauseTime:(t-this.startTime)*this.rate,this.t=i,i/=1e3,i=Math.max(i-f,0),"finished"===this.playState&&void 0===this.pauseTime&&(i=this.totalDuration);const s=i/this.duration;let r=Math.floor(s),a=s%1;!a&&s>=1&&(a=1),1===a&&r--;const o=r%2;("reverse"===v||"alternate"===v&&o||"alternate-reverse"===v&&!o)&&(a=1-a);const c=i>=this.totalDuration?1:Math.min(a,1),u=m(this.easing(c));n(u),void 0===this.pauseTime&&("finished"===this.playState||i>=this.totalDuration+d)?(this.playState="finished",null===(e=this.resolve)||void 0===e||e.call(this,u)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(t=this.reject)||void 0===t||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){void 0!==this.pauseTime||0===this.rate?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class b{setAnimation(t){this.animation=t,null==t||t.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const S=new WeakMap;function $(t){return S.has(t)||S.set(t,{transforms:[],values:new Map}),S.get(t)}const j=["","X","Y","Z"],x={x:"translateX",y:"translateY",z:"translateZ"},A={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},D={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:A,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:a},skew:A},k=new Map,O=t=>`--motion-${t}`,F=["x","y","z"];["translate","scale","rotate","skew"].forEach((t=>{j.forEach((e=>{F.push(t+e),k.set(O(t+e),D[t])}))}));const T=(t,e)=>F.indexOf(t)-F.indexOf(e),P=new Set(F),R=t=>P.has(t),V=(t,e)=>`${t} ${e}(var(${O(e)}))`,z=t=>t.startsWith("--"),C=new Set,E=(t,e)=>document.createElement("div").animate(t,e),B={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{E({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(E({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{E({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}},N={},U={};for(const t in B)U[t]=()=>(void 0===N[t]&&(N[t]=B[t]()),N[t]);const W=(t,n)=>h(t)?U.linearEasing()?`linear(${((t,e)=>{let n="";const i=Math.round(e/.015);for(let e=0;e<i;e++)n+=t(o(0,i-1,e))+", ";return n.substring(0,n.length-2)})(t,n)})`:e.easing:u(t)?q(t):t,q=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`;function X(t){return x[t]&&(t=x[t]),R(t)?O(t):t}const Y=(t,e,n)=>{e=X(e),z(e)?t.style.setProperty(e,n):t.style[e]=n};function Z(t,e=!0){if(t&&"finished"!==t.playState)try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch(t){}}function K(t,e){var n;let i=(null==e?void 0:e.toDefaultUnit)||a;const s=t[t.length-1];if(f(s)){const t=(null===(n=s.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";t&&(i=e=>e+t)}return i}function G(t,s,a,o={},c){const u=window.__MOTION_DEV_TOOLS_RECORD,f=!1!==o.record&&u;let p,{duration:y=e.duration,delay:v=e.delay,endDelay:m=e.endDelay,repeat:g=e.repeat,easing:M=e.easing,direction:w,offset:S,allowWebkitAcceleration:j=!1}=o;const A=$(t),D=R(s);let O=U.waapi();D&&((t,e)=>{x[e]&&(e=x[e]);const{transforms:n}=$(t);var i,s;-1===(i=n).indexOf(s=e)&&i.push(s),t.style.transform=(t=>t.sort(T).reduce(V,"").trim())(n)})(t,s);const F=X(s),P=function(t,e){return t.has(e)||t.set(e,new b),t.get(e)}(A.values,F),E=k.get(F);return Z(P.animation,!(l(M)&&P.generator)&&!1!==o.record),()=>{const e=()=>{var e,n;return null!==(n=null!==(e=((t,e)=>{e=X(e);let n=z(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!n&&0!==n){const t=k.get(e);t&&(n=t.initialValue)}return n})(t,F))&&void 0!==e?e:null==E?void 0:E.initialValue)&&void 0!==n?n:0};let b=function(t,e){for(let n=0;n<t.length;n++)null===t[n]&&(t[n]=n?t[n-1]:e());return t}((t=>Array.isArray(t)?t:[t])(a),e);const $=K(b,E);if(l(M)){const t=M.createAnimation(b,"opacity"!==s,e,F,P);M=t.easing,b=t.keyframes||b,y=t.duration||y}if(z(F)&&(U.cssRegisterProperty()?function(t){if(!C.has(t)){C.add(t);try{const{syntax:e,initialValue:n}=k.has(t)?k.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:n})}catch(t){}}}(F):O=!1),D&&!U.linearEasing()&&(h(M)||i(M)&&M.some(h))&&(O=!1),O){E&&(b=b.map((t=>n(t)?E.toDefaultUnit(t):t))),1!==b.length||U.partialKeyframes()&&!f||b.unshift(e());const s={delay:d(v),duration:d(y),endDelay:d(m),easing:i(M)?void 0:W(M,y),direction:w,iterations:g+1,fill:"both"};p=t.animate({[F]:b,offset:S,easing:i(M)?M.map((t=>W(t,y))):void 0},s),p.finished||(p.finished=new Promise(((t,e)=>{p.onfinish=t,p.oncancel=e})));const a=b[b.length-1];p.finished.then((()=>{Y(t,F,a),p.cancel()})).catch(r),j||(p.playbackRate=1.000001)}else if(c&&D)b=b.map((t=>"string"==typeof t?parseFloat(t):t)),1===b.length&&b.unshift(parseFloat(e())),p=new c((e=>{Y(t,F,$?$(e):e)}),b,Object.assign(Object.assign({},o),{duration:y,easing:M}));else{const e=b[b.length-1];Y(t,F,E&&n(e)?E.toDefaultUnit(e):e)}return f&&u(t,s,b,{duration:y,delay:v,easing:M,repeat:g,offset:S},"motion-one"),P.setAnimation(p),p}}const H=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t),I=t=>t(),J=(t,n,i=e.duration)=>new Proxy({animations:t.map(I).filter(Boolean),duration:i,options:n},L),L={get:(t,e)=>{const n=t.animations[0];switch(e){case"duration":return t.duration;case"currentTime":return p((null==n?void 0:n[e])||0);case"playbackRate":case"playState":return null==n?void 0:n[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Q)).catch(r)),t.finished;case"stop":return()=>{t.animations.forEach((t=>Z(t)))};case"forEachNative":return e=>{t.animations.forEach((n=>e(n,t)))};default:return void 0===(null==n?void 0:n[e])?void 0:()=>t.animations.forEach((t=>t[e]()))}},set:(t,e,n)=>{switch(e){case"currentTime":n=d(n);case"currentTime":case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=n;return!0}return!1}},Q=t=>t.finished;function _(t,e,n){return h(t)?t(e,n):t}const tt=(et=w,function(t,e,n={}){const i=(t=function(t){return"string"==typeof t?t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}(t)).length,s=[];for(let r=0;r<i;r++){const a=t[r];for(const t in e){const o=H(n,t);o.delay=_(o.delay,r,i);const c=G(a,t,e[t],o,et);s.push(c)}}return J(s,n,n.duration)});var et;function nt(t,e,n){const i=Math.max(e-5,0);return s=n-t(i),(r=e-i)?s*(1e3/r):0;var s,r}function it(t){return n(t)&&!isNaN(t)}function st(t){return f(t)?parseFloat(t):t}const rt=function(){const t=new WeakMap;return(e={})=>{const n=new Map,i=(t=0,i=100,s=0,r=!1)=>{const a=`${t}-${i}-${s}-${r}`;return n.has(a)||n.set(a,(({stiffness:t=100,damping:e=10,mass:n=1,from:i=0,to:s=1,velocity:r=0,restSpeed:a=2,restDistance:o=.5}={})=>{r=r?p(r):0;const c={done:!1,hasReachedTarget:!1,current:i,target:s},u=s-i,l=Math.sqrt(t/n)/1e3,h=((t=100,e=10,n=1)=>e/(2*Math.sqrt(t*n)))(t,e,n);let f;if(h<1){const t=l*Math.sqrt(1-h*h);f=e=>s-Math.exp(-h*l*e)*((h*l*u-r)/t*Math.sin(t*e)+u*Math.cos(t*e))}else f=t=>s-Math.exp(-l*t)*(u+(l*u-r)*t);return t=>{c.current=f(t);const e=0===t?r:nt(f,t,c.current),n=Math.abs(e)<=a,u=Math.abs(s-c.current)<=o;var l,h,d;return c.done=n&&u,c.hasReachedTarget=(d=c.current,(l=i)<(h=s)&&d>=h||l>h&&d<=h),c}})(Object.assign({from:t,to:i,velocity:s,restSpeed:r?.05:2,restDistance:r?.01:.5},e))),n.get(a)},s=(e,n)=>(t.has(e)||t.set(e,function(t,e=a){let n,i=10,s=t(0);const r=[e(s.current)];for(;!s.done&&i<1e4;)s=t(i),r.push(e(s.done?s.target:s.current)),void 0===n&&s.hasReachedTarget&&(n=i),i+=10;const o=i-10;return 1===r.length&&r.push(s.current),{keyframes:r,duration:o/1e3,overshootDuration:(null!=n?n:o)/1e3}}(e,n)),t.get(e));return{createAnimation:(t,e=!0,n,r,o)=>{let c,u,l,h=0,f=a;const d=t.length;if(e)if(f=K(t,r?k.get(X(r)):void 0),l=st(t[d-1]),d>1&&null!==t[0])u=st(t[0]);else{const t=null==o?void 0:o.generator;if(t){const{animation:e,generatorStartTime:n}=o,i=(null==e?void 0:e.startTime)||n||0,s=(null==e?void 0:e.currentTime)||performance.now()-i,r=t(s).current;u=r,h=nt((e=>t(e).current),s,r)}else n&&(u=st(n()))}if(it(u)&&it(l)){const t=i(u,l,h,null==r?void 0:r.includes("scale"));c=Object.assign(Object.assign({},s(t,f)),{easing:"linear"}),o&&(o.generator=t,o.generatorStartTime=performance.now())}return c||(c={easing:"ease",duration:s(i(0,100)).overshootDuration}),c}}}}();function at(t,e={}){return J([()=>{const n=new w(t,[0,1],e);return n.finished.catch((()=>{})),n}],e,e.duration)}function ot(t,e,n){return(h(t)?at:tt)(t,e,n)}export{ot as a,rt as s}